(function(h){var i=h.DOM,g=h.dom.Event,c=h.extend,f=h.each,a=h.util.Cookie,e,d=h.explode;h.Editor.prototype.insertOrUpdateImage=function(k,j){if(!k){this.execCommand("mceInsertContent",false,'<img id="__mce_tmp" />',{skip_undo:1});this.dom.setAttribs("__mce_tmp",j);this.dom.setAttrib("__mce_tmp","id","");this.undoManager.add()}else{this.dom.setAttribs(k,j);this.execCommand("mceRepaint")}};function b(q,p,t,s,k){var o=this;var j=createElem("div",{className:"modalBox",keypress:function(v){v=window.event?event:v;var u=v.charCode||v.keyCode;if(u==13){t()}else{if(u==27){s()}}}},createElem("div",{className:"modalHeading"},q),p,createElem("div",{className:"modalButtons"},createElem("input",{type:"submit",value:o.getLang("advanced.ok"),click:function(){t()}})," ",createElem("input",{type:"submit",value:o.getLang("advanced.cancel"),click:function(){s()}})));var n=createElem("div",{className:"modalShadow"});k=k||400;j.style.width=k+"px";var m=document.body.offsetWidth||window.innerWidth;j.style.left=(m/2-k/2)+"px";var l=window.pageYOffset||window.document.documentElement.scrollTop||window.document.body.scrollTop;j.style.top=(l+100)+"px";var r=document.documentElement.scrollHeight||document.body.scrollHeight;n.style.height=r+"px";return createElem("div",n,j)}h.Editor.prototype.createModalBox=b;h.create("tinymce.themes.AdvancedTheme",{sizes:[8,10,12,14,18,24,36],controls:{bold:["bold_desc","Bold"],italic:["italic_desc","Italic"],underline:["underline_desc","Underline"],strikethrough:["striketrough_desc","Strikethrough"],justifyleft:["justifyleft_desc","JustifyLeft"],justifycenter:["justifycenter_desc","JustifyCenter"],justifyright:["justifyright_desc","JustifyRight"],justifyfull:["justifyfull_desc","JustifyFull"],bullist:["bullist_desc","InsertUnorderedList"],numlist:["numlist_desc","InsertOrderedList"],outdent:["outdent_desc","Outdent"],indent:["indent_desc","Indent"],cut:["cut_desc","Cut"],copy:["copy_desc","Copy"],paste:["paste_desc","Paste"],undo:["undo_desc","Undo"],redo:["redo_desc","Redo"],link:["link_desc","mceLink"],unlink:["unlink_desc","unlink"],image:["image_desc","mceImage"],document:["document_desc","mceDocument"],cleanup:["cleanup_desc","mceCleanup"],help:["help_desc","mceHelp"],code:["code_desc","mceCodeEditor"],hr:["hr_desc","InsertHorizontalRule"],removeformat:["removeformat_desc","RemoveFormat"],sub:["sub_desc","subscript"],sup:["sup_desc","superscript"],forecolor:["forecolor_desc","ForeColor"],forecolorpicker:["forecolor_desc","mceForeColor"],backcolor:["backcolor_desc","HiliteColor"],backcolorpicker:["backcolor_desc","mceBackColor"],charmap:["charmap_desc","mceCharMap"],visualaid:["visualaid_desc","mceToggleVisualAid"],anchor:["anchor_desc","mceInsertAnchor"],newdocument:["newdocument_desc","mceNewDocument"],blockquote:["blockquote_desc","mceBlockQuote"]},stateControls:["bold","italic","underline","strikethrough","bullist","numlist","justifyleft","justifycenter","justifyright","justifyfull","sub","sup","blockquote"],init:function(k,l){var m=this,n,j,p;m.editor=k;m.url=l;m.onResolveName=new h.util.Dispatcher(this);m.settings=n=c({theme_advanced_path:true,theme_advanced_toolbar_location:"top",theme_advanced_buttons1:"",theme_advanced_buttons2:"",theme_advanced_buttons3:"",theme_advanced_blockformats:"p,pre,h1,h2,h3",theme_advanced_toolbar_align:"center",theme_advanced_fonts:"Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",theme_advanced_more_colors:1,theme_advanced_row_height:23,theme_advanced_resize_horizontal:1,theme_advanced_resizing_use_cookie:1,theme_advanced_font_sizes:"1,2,3,4,5,6,7",theme_advanced_statusbar_location:"none",theme_advanced_resizing:false,theme_advanced_toolbar_align:"left",readonly:k.settings.readonly},k.settings);if(!n.font_size_style_values){n.font_size_style_values="8pt,10pt,12pt,14pt,18pt,24pt,36pt"}if(h.is(n.theme_advanced_font_sizes,"string")){n.font_size_style_values=h.explode(n.font_size_style_values);n.font_size_classes=h.explode(n.font_size_classes||"");p={};k.settings.theme_advanced_font_sizes=n.theme_advanced_font_sizes;f(k.getParam("theme_advanced_font_sizes","","hash"),function(r,q){var o;if(q==r&&r>=1&&r<=7){q=r+" ("+m.sizes[r-1]+"pt)";o=n.font_size_classes[r-1];r=n.font_size_style_values[r-1]||(m.sizes[r-1]+"pt")}if(/^\s*\./.test(r)){o=r.replace(/\./g,"")}p[q]=o?{"class":o}:{fontSize:r}});n.theme_advanced_font_sizes=p}if((j=n.theme_advanced_path_location)&&j!="none"){n.theme_advanced_statusbar_location=n.theme_advanced_path_location}if(n.theme_advanced_statusbar_location=="none"){n.theme_advanced_statusbar_location=0}k.onInit.add(function(){if(!k.settings.readonly){k.onNodeChange.add(m._nodeChanged,m)}});k.onSetProgressState.add(function(r,o,s){var t,u=r.id,q;if(o){m.progressTimer=setTimeout(function(){t=r.getContainer();t=t.insertBefore(i.create("DIV",{style:"position:relative"}),t.firstChild);q=i.get(r.id+"_tbl");i.add(t,"div",{id:u+"_blocker","class":"mceBlocker",style:{width:q.clientWidth+2,height:q.clientHeight+2}});i.add(t,"div",{id:u+"_progress","class":"mceProgress",style:{left:q.clientWidth/2,top:q.clientHeight/2}})},s||0)}else{i.remove(u+"_blocker");i.remove(u+"_progress");clearTimeout(m.progressTimer)}});i.loadCSS(n.editor_css?k.documentBaseURI.toAbsolute(n.editor_css):l+"/skins/"+k.settings.skin+"/ui.css");if(n.skin_variant){i.loadCSS(l+"/skins/"+k.settings.skin+"/ui_"+n.skin_variant+".css")}},createControl:function(m,j){var k,l;if(l=j.createControl(m)){return l}switch(m){case"styleselect":return this._createStyleSelect();case"formatselect":return this._createBlockFormats();case"fontselect":return this._createFontSelect();case"fontsizeselect":return this._createFontSizeSelect();case"forecolor":return this._createForeColorMenu();case"backcolor":return this._createBackColorMenu()}if((k=this.controls[m])){return j.createButton(m,{title:"advanced."+k[0],cmd:k[1],ui:k[2],value:k[3]})}},execCommand:function(l,k,m){var j=this["_"+l];if(j){j.call(this,k,m);return true}return false},_importClasses:function(l){var j=this.editor,k=j.controlManager.get("styleselect");if(k.getLength()==0){f(j.dom.getClasses(),function(p,m){var n="style_"+m;j.formatter.register(n,{inline:"span",attributes:{"class":p["class"]},selector:"*"});k.add(p["class"],n)})}},_createStyleSelect:function(o){var l=this,j=l.editor,k=j.controlManager,m;m=k.createListBox("styleselect",{title:"advanced.style_select",onselect:function(p){var q,n=[];f(m.items,function(r){n.push(r.value)});j.focus();j.undoManager.add();q=j.formatter.matchAll(n);if(q[0]==p){j.formatter.remove(p)}else{j.formatter.apply(p)}j.undoManager.add();j.nodeChanged();return false}});j.onInit.add(function(){var p=0,n=j.getParam("style_formats");if(n){f(n,function(q){var r,s=0;f(q,function(){s++});if(s>1){r=q.name=q.name||"style_"+(p++);j.formatter.register(r,q);m.add(q.title,r)}else{m.add(q.title)}})}else{f(j.getParam("theme_advanced_styles","","hash"),function(s,r){var q;if(s){q="style_"+(p++);j.formatter.register(q,{inline:"span",classes:s,selector:"*"});m.add(l.editor.translate(r),q)}})}});if(m.getLength()==0){m.onPostRender.add(function(p,q){if(!m.NativeListBox){g.add(q.id+"_text","focus",l._importClasses,l);g.add(q.id+"_text","mousedown",l._importClasses,l);g.add(q.id+"_open","focus",l._importClasses,l);g.add(q.id+"_open","mousedown",l._importClasses,l)}else{g.add(q.id,"focus",l._importClasses,l)}})}return m},_createFontSelect:function(){var l,k=this,j=k.editor;l=j.controlManager.createListBox("fontselect",{title:"advanced.fontdefault",onselect:function(m){j.execCommand("FontName",false,m);l.select(function(n){return m==n});return false}});if(l){f(j.getParam("theme_advanced_fonts",k.settings.theme_advanced_fonts,"hash"),function(n,m){l.add(j.translate(m),n,{style:n.indexOf("dings")==-1?"font-family:"+n:""})})}return l},_createFontSizeSelect:function(){var m=this,k=m.editor,n,l=0,j=[];n=k.controlManager.createListBox("fontsizeselect",{title:"advanced.font_size",onselect:function(o){if(o["class"]){k.focus();k.undoManager.add();k.formatter.toggle("fontsize_class",{value:o["class"]});k.undoManager.add();k.nodeChanged()}else{k.execCommand("FontSize",false,o.fontSize)}n.select(function(p){return o==p});return false}});if(n){f(m.settings.theme_advanced_font_sizes,function(p,o){var q=p.fontSize;if(q>=1&&q<=7){q=m.sizes[parseInt(q)-1]+"pt"}n.add(o,p,{style:"font-size:"+q,"class":"mceFontSize"+(l++)+(" "+(p["class"]||""))})})}return n},_createBlockFormats:function(){var l,j={p:"advanced.paragraph",address:"advanced.address",pre:"advanced.pre",h1:"advanced.h1",h2:"advanced.h2",h3:"advanced.h3",h4:"advanced.h4",h5:"advanced.h5",h6:"advanced.h6",div:"advanced.div",blockquote:"advanced.blockquote",code:"advanced.code",dt:"advanced.dt",dd:"advanced.dd",samp:"advanced.samp"},k=this;l=k.editor.controlManager.createListBox("formatselect",{title:"advanced.block",cmd:"FormatBlock"});if(l){f(k.editor.getParam("theme_advanced_blockformats",k.settings.theme_advanced_blockformats,"hash"),function(n,m){l.add(k.editor.translate(m!=n?m:j[n]),n,{"class":"mce_formatPreview mce_"+n})})}return l},_createForeColorMenu:function(){var n,k=this,l=k.settings,m={},j;if(l.theme_advanced_more_colors){m.more_colors_func=function(){k._mceColorPicker(0,{color:n.value,func:function(o){n.setColor(o)}})}}if(j=l.theme_advanced_text_colors){m.colors=j}if(l.theme_advanced_default_foreground_color){m.default_color=l.theme_advanced_default_foreground_color}m.title="advanced.forecolor_desc";m.cmd="ForeColor";m.scope=this;n=k.editor.controlManager.createColorSplitButton("forecolor",m);return n},_createBackColorMenu:function(){var n,k=this,l=k.settings,m={},j;if(l.theme_advanced_more_colors){m.more_colors_func=function(){k._mceColorPicker(0,{color:n.value,func:function(o){n.setColor(o)}})}}if(j=l.theme_advanced_background_colors){m.colors=j}if(l.theme_advanced_default_background_color){m.default_color=l.theme_advanced_default_background_color}m.title="advanced.backcolor_desc";m.cmd="HiliteColor";m.scope=this;n=k.editor.controlManager.createColorSplitButton("backcolor",m);return n},renderUI:function(l){var q,m,r,w=this,u=w.editor,x=w.settings,v,k,j;q=k=i.create("span",{id:u.id+"_parent","class":"mceEditor "+u.settings.skin+"Skin"+(x.skin_variant?" "+u.settings.skin+"Skin"+w._ufirst(x.skin_variant):"")});if(!i.boxModel){q=i.add(q,"div",{"class":"mceOldBoxModel"})}q=v=i.add(q,"table",{id:u.id+"_tbl","class":"mceLayout",cellSpacing:0,cellPadding:0});q=r=i.add(q,"tbody");switch((x.theme_advanced_layout_manager||"").toLowerCase()){case"rowlayout":m=w._rowLayout(x,r,l);break;case"customlayout":m=u.execCallback("theme_advanced_custom_layout",x,r,l,k);break;default:m=w._simpleLayout(x,r,l,k)}q=l.targetNode;j=i.stdMode?v.getElementsByTagName("tr"):v.rows;i.addClass(j[0],"mceFirst");i.addClass(j[j.length-1],"mceLast");f(i.select("tr",r),function(o){i.addClass(o.firstChild,"mceFirst");i.addClass(o.childNodes[o.childNodes.length-1],"mceLast")});if(i.get(x.theme_advanced_toolbar_container)){i.get(x.theme_advanced_toolbar_container).appendChild(k)}else{i.insertAfter(k,q)}g.add(u.id+"_path_row","click",function(n){n=n.target;if(n.nodeName=="A"){w._sel(n.className.replace(/^.*mcePath_([0-9]+).*$/,"$1"));return g.cancel(n)}});if(!u.getParam("accessibility_focus")){g.add(i.add(k,"a",{href:"#"},"<!-- IE -->"),"focus",function(){tinyMCE.get(u.id).focus()})}if(x.theme_advanced_toolbar_location=="external"){l.deltaHeight=0}w.deltaHeight=l.deltaHeight;l.targetNode=null;return{iframeContainer:m,editorContainer:u.id+"_parent",sizeContainer:v,deltaHeight:l.deltaHeight}},getInfo:function(){return{longname:"Advanced theme",author:"Moxiecode Systems AB",authorurl:"http://tinymce.moxiecode.com",version:h.majorVersion+"."+h.minorVersion}},resizeBy:function(j,k){var l=i.get(this.editor.id+"_tbl");this.resizeTo(l.clientWidth+j,l.clientHeight+k)},resizeTo:function(j,m){var k=this.editor,l=this.settings,n=i.get(k.id+"_tbl"),o=i.get(k.id+"_ifr");j=Math.max(l.theme_advanced_resizing_min_width||100,j);m=Math.max(l.theme_advanced_resizing_min_height||100,m);j=Math.min(l.theme_advanced_resizing_max_width||65535,j);m=Math.min(l.theme_advanced_resizing_max_height||65535,m);i.setStyle(n,"height","");i.setStyle(o,"height",m);if(l.theme_advanced_resize_horizontal){i.setStyle(n,"width","");i.setStyle(o,"width",j);if(j<n.clientWidth){i.setStyle(o,"width",n.clientWidth)}}},destroy:function(){var j=this.editor.id;g.clear(j+"_resize");g.clear(j+"_path_row");g.clear(j+"_external_close")},_simpleLayout:function(z,u,l,j){var y=this,v=y.editor,w=z.theme_advanced_toolbar_location,q=z.theme_advanced_statusbar_location,m,k,r,x;if(z.readonly){m=i.add(u,"tr");m=k=i.add(m,"td",{"class":"mceIframeContainer"});return k}if(w=="top"){y._addToolbars(u,l)}if(w=="external"){m=x=i.create("div",{style:"position:relative"});m=i.add(m,"div",{id:v.id+"_external","class":"mceExternalToolbar"});i.add(m,"a",{id:v.id+"_external_close",href:"javascript:;","class":"mceExternalClose"});m=i.add(m,"table",{id:v.id+"_tblext",cellSpacing:0,cellPadding:0});r=i.add(m,"tbody");if(j.firstChild.className=="mceOldBoxModel"){j.firstChild.appendChild(x)}else{j.insertBefore(x,j.firstChild)}y._addToolbars(r,l);v.onMouseUp.add(function(){var o=i.get(v.id+"_external");i.show(o);i.hide(e);var n=g.add(v.id+"_external_close","click",function(){i.hide(v.id+"_external");g.remove(v.id+"_external_close","click",n)});i.show(o);i.setStyle(o,"top",0-i.getRect(v.id+"_tblext").h-1);i.hide(o);i.show(o);o.style.filter="";e=v.id+"_external";o=null})}if(q=="top"){y._addStatusBar(u,l)}if(!z.theme_advanced_toolbar_container){m=i.add(u,"tr");m=k=i.add(m,"td",{"class":"mceIframeContainer"})}if(w=="bottom"){y._addToolbars(u,l)}if(q=="bottom"){y._addStatusBar(u,l)}return k},_rowLayout:function(x,p,l){var w=this,q=w.editor,v,y,j=q.controlManager,m,k,u,r;v=x.theme_advanced_containers_default_class||"";y=x.theme_advanced_containers_default_align||"center";f(d(x.theme_advanced_containers||""),function(s,o){var n=x["theme_advanced_container_"+s]||"";switch(n.toLowerCase()){case"mceeditor":m=i.add(p,"tr");m=k=i.add(m,"td",{"class":"mceIframeContainer"});break;case"mceelementpath":w._addStatusBar(p,l);break;default:r=(x["theme_advanced_container_"+s+"_align"]||y).toLowerCase();r="mce"+w._ufirst(r);m=i.add(i.add(p,"tr"),"td",{"class":"mceToolbar "+(x["theme_advanced_container_"+s+"_class"]||v)+" "+r||y});u=j.createToolbar("toolbar"+o);w._addControls(n,u);i.setHTML(m,u.renderHTML());l.deltaHeight-=x.theme_advanced_row_height}});return k},_addControls:function(k,j){var l=this,m=l.settings,n,o=l.editor.controlManager;if(m.theme_advanced_disable&&!l._disabled){n={};f(d(m.theme_advanced_disable),function(p){n[p]=1});l._disabled=n}else{n=l._disabled}f(d(k),function(q){var p;if(n&&n[q]){return}if(q=="tablecontrols"){f(["table","|","row_props","cell_props","|","row_before","row_after","delete_row","|","col_before","col_after","delete_col","|","split_cells","merge_cells"],function(r){r=l.createControl(r,o);if(r){j.add(r)}});return}p=l.createControl(q,o);if(p){j.add(p)}})},_addToolbars:function(w,k){var z=this,p,m,r=z.editor,A=z.settings,y,j=r.controlManager,u,l,q=[],x;x=A.theme_advanced_toolbar_align.toLowerCase();x="mce"+z._ufirst(x);l=i.add(i.add(w,"tr"),"td",{"class":"mceToolbar "+x});if(!r.getParam("accessibility_focus")){q.push(i.createHTML("a",{href:"#",onfocus:"tinyMCE.get('"+r.id+"').focus();"},"<!-- IE -->"))}q.push(i.createHTML("a",{href:"#",accesskey:"q",title:r.getLang("advanced.toolbar_focus")},"<!-- IE -->"));for(p=1;(y=A["theme_advanced_buttons"+p]);p++){m=j.createToolbar("toolbar"+p,{"class":"mceToolbarRow"+p});if(A["theme_advanced_buttons"+p+"_add"]){y+=","+A["theme_advanced_buttons"+p+"_add"]}if(A["theme_advanced_buttons"+p+"_add_before"]){y=A["theme_advanced_buttons"+p+"_add_before"]+","+y}z._addControls(y,m);q.push(m.renderHTML());k.deltaHeight-=A.theme_advanced_row_height}q.push(i.createHTML("a",{href:"#",accesskey:"z",title:r.getLang("advanced.toolbar_focus"),onfocus:"tinyMCE.getInstanceById('"+r.id+"').focus();"},"<!-- IE -->"));i.setHTML(l,q.join(""))},_addStatusBar:function(p,k){var l,w=this,q=w.editor,x=w.settings,j,u,v,m;l=i.add(p,"tr");l=m=i.add(l,"td",{"class":"mceStatusbar"});l=i.add(l,"div",{id:q.id+"_path_row"},x.theme_advanced_path?q.translate("advanced.path")+": ":"&#160;");i.add(l,"a",{href:"#",accesskey:"x"});if(x.theme_advanced_resizing){i.add(m,"a",{id:q.id+"_resize",href:"javascript:;",onclick:"return false;","class":"mceResize"});if(x.theme_advanced_resizing_use_cookie){q.onPostRender.add(function(){var n=a.getHash("TinyMCE_"+q.id+"_size"),r=i.get(q.id+"_tbl");if(!n){return}w.resizeTo(n.cw,n.ch)})}q.onPostRender.add(function(){g.add(q.id+"_resize","mousedown",function(E){var t,r,s,o,D,A,B,G,n,F,y;function z(H){n=B+(H.screenX-D);F=G+(H.screenY-A);w.resizeTo(n,F)}function C(H){g.remove(i.doc,"mousemove",t);g.remove(q.getDoc(),"mousemove",r);g.remove(i.doc,"mouseup",s);g.remove(q.getDoc(),"mouseup",o);if(x.theme_advanced_resizing_use_cookie){a.setHash("TinyMCE_"+q.id+"_size",{cw:n,ch:F})}}E.preventDefault();D=E.screenX;A=E.screenY;y=i.get(w.editor.id+"_ifr");B=n=y.clientWidth;G=F=y.clientHeight;t=g.add(i.doc,"mousemove",z);r=g.add(q.getDoc(),"mousemove",z);s=g.add(i.doc,"mouseup",C);o=g.add(q.getDoc(),"mouseup",C)})})}k.deltaHeight-=21;l=p=null},_nodeChanged:function(o,u,C,q,D){var z=this,B,E=0,y,F,A=z.settings,x,l,w,k,j;h.each(z.stateControls,function(n){u.setActive(n,o.queryCommandState(z.controls[n][1]))});function r(p){var s,n=D.parents,t=p;if(typeof(p)=="string"){t=function(v){return v.nodeName==p}}for(s=0;s<n.length;s++){if(t(n[s])){return n[s]}}}u.setActive("visualaid",o.hasVisual);u.setDisabled("undo",!o.undoManager.hasUndo()&&!o.typing);u.setDisabled("redo",!o.undoManager.hasRedo());u.setDisabled("outdent",!o.queryCommandState("Outdent"));B=r("A");if(F=u.get("link")){if(!B||!B.name){F.setActive(!!B)}}if(F=u.get("unlink")){F.setDisabled(!B&&q);F.setActive(!!B&&!B.name)}if(F=u.get("anchor")){F.setActive(!!B&&B.name)}B=r("IMG");var m=!!B&&B.className.indexOf("scribd_placeholder")!=-1;if(F=u.get("image")){F.setActive(!!B&&!m&&C.className.indexOf("mceItem")==-1)}if(F=u.get("document")){F.setActive(m)}if(F=u.get("styleselect")){z._importClasses();k=[];f(F.items,function(n){k.push(n.value)});j=o.formatter.matchAll(k);F.select(j[0])}if(F=u.get("formatselect")){B=r(i.isBlock);if(B){F.select(B.nodeName.toLowerCase())}}r(function(p){if(p.nodeName==="SPAN"){if(!x&&p.className){x=p.className}if(!l&&p.style.fontSize){l=p.style.fontSize}if(!w&&p.style.fontFamily){w=p.style.fontFamily.replace(/[\"\']+/g,"").replace(/^([^,]+).*/,"$1").toLowerCase()}}return false});if(F=u.get("fontselect")){F.select(function(n){return n.replace(/^([^,]+).*/,"$1").toLowerCase()==w})}if(F=u.get("fontsizeselect")){if(A.theme_advanced_runtime_fontsize&&!l&&!x){l=o.dom.getStyle(C,"fontSize",true)}F.select(function(n){if(n.fontSize&&n.fontSize===l){return true}if(n["class"]&&n["class"]===x){return true}})}if(A.theme_advanced_path&&A.theme_advanced_statusbar_location){B=i.get(o.id+"_path")||i.add(o.id+"_path_row","span",{id:o.id+"_path"});i.setHTML(B,"");r(function(G){var p=G.nodeName.toLowerCase(),s,v,t="";if(G.nodeType!=1||G.nodeName==="BR"||(i.hasClass(G,"mceItemHidden")||i.hasClass(G,"mceItemRemoved"))){return}if(y=i.getAttrib(G,"mce_name")){p=y}if(h.isIE&&G.scopeName!=="HTML"){p=G.scopeName+":"+p}p=p.replace(/mce\:/g,"");switch(p){case"b":p="strong";break;case"i":p="em";break;case"img":if(y=i.getAttrib(G,"src")){t+="src: "+y+" "}break;case"a":if(y=i.getAttrib(G,"name")){t+="name: "+y+" ";p+="#"+y}if(y=i.getAttrib(G,"href")){t+="href: "+y+" "}break;case"font":if(y=i.getAttrib(G,"face")){t+="font: "+y+" "}if(y=i.getAttrib(G,"size")){t+="size: "+y+" "}if(y=i.getAttrib(G,"color")){t+="color: "+y+" "}break;case"span":if(y=i.getAttrib(G,"style")){t+="style: "+y+" "}break}if(y=i.getAttrib(G,"id")){t+="id: "+y+" "}if(y=G.className){y=y.replace(/\b\s*(webkit|mce|Apple-)\w+\s*\b/g,"");if(y){t+="class: "+y+" ";if(i.isBlock(G)||p=="img"||p=="span"){p+="."+y}}}p=p.replace(/(html:)/g,"");p={name:p,node:G,title:t};z.onResolveName.dispatch(z,p);t=p.title;p=p.name;v=i.create("a",{href:"javascript:;",onmousedown:"return false;",title:t,"class":"mcePath_"+(E++)},p);if(B.hasChildNodes()){B.insertBefore(i.doc.createTextNode(" \u00bb "),B.firstChild);B.insertBefore(v,B.firstChild)}else{B.appendChild(v)}},o.getBody())}},_sel:function(j){this.editor.execCommand("mceSelectNodeDepth",false,j)},_mceInsertAnchor:function(l,k){var j=this.editor;j.windowManager.open({url:h.baseURL+"/themes/advanced/anchor.htm",width:320+parseInt(j.getLang("advanced.anchor_delta_width",0)),height:90+parseInt(j.getLang("advanced.anchor_delta_height",0)),inline:true},{theme_url:this.url})},_mceCharMap:function(){var j=this.editor;j.windowManager.open({url:h.baseURL+"/themes/advanced/charmap.htm",width:550+parseInt(j.getLang("advanced.charmap_delta_width",0)),height:250+parseInt(j.getLang("advanced.charmap_delta_height",0)),inline:true},{theme_url:this.url})},_mceHelp:function(){var j=this.editor;j.windowManager.open({url:h.baseURL+"/themes/advanced/about.htm",width:480,height:380,inline:true},{theme_url:this.url})},_mceColorPicker:function(l,k){var j=this.editor;k=k||{};j.windowManager.open({url:h.baseURL+"/themes/advanced/color_picker.htm",width:375+parseInt(j.getLang("advanced.colorpicker_delta_width",0)),height:250+parseInt(j.getLang("advanced.colorpicker_delta_height",0)),close_previous:false,inline:true},{input_color:k.color,func:k.func,theme_url:this.url})},_mceCodeEditor:function(k,l){var j=this.editor;j.windowManager.open({url:h.baseURL+"/themes/advanced/source_editor.htm",width:parseInt(j.getParam("theme_advanced_source_editor_width",720)),height:parseInt(j.getParam("theme_advanced_source_editor_height",580)),inline:true,resizable:true,maximizable:true},{theme_url:this.url})},_mceDocument:function(s,k){var p=this.editor;var q=p.selection.getNode();var u=(q&&q.nodeName=="IMG")?q:null;var o=p.selection.getRng();var r="";if(u&&u.alt){var t=u.alt.split(":");r=t[3]}var n="modalDocumentFrame_"+Math.ceil(Math.random()*1000000);var m=createElem("iframe",{src:"/org/selectDocument?r="+Math.random()+"&guid="+escape(r)+"&frameId="+n,scrolling:"no",frameBorder:"0",border:"0",className:"modalDocumentFrame",name:n,id:n});var l=createElem("div",{className:"modalImageFrameLoading"},p.getLang("advanced.loading"));var j=p.createModalBox(p.getLang(u?"advanced.document_edit":"advanced.document_insert"),createElem("div",{className:"modalBody"},l,m),w,v,640);function w(){var x=window.frames[n];var y=x.getUploadedFile();p.selection.setRng(o);if(y){p.insertOrUpdateImage(u,{src:"/_graphics/document_icon.jpg",width:"100%",height:"300","class":"scribd_placeholder",alt:y.filename+":"+y.docid+":"+y.accesskey+":"+y.guid})}removeElem(j)}function v(){removeElem(j)}window["frameapi_"+n]={saveChanges:w,cancel:v,iframe:m,loading:l};document.body.appendChild(j);setTimeout(function(){m.focus()},1)},_mceImage:function(u,l){var r=this.editor;var s=r.selection.getNode();var v=(s&&s.nodeName=="IMG")?s:null;var j=v?s.src:"";var t="";if(v){var q=/image_(\w+)/.exec(v.className);if(q){t=q[1]}}var p="modalImageFrame_"+Math.ceil(Math.random()*1000000);var o=r.selection.getRng();var n=createElem("iframe",{src:"/org/selectImage?r="+Math.random()+"&src="+escape(j)+"&pos="+escape(t)+"&frameId="+p,scrolling:"no",frameBorder:"0",border:"0",className:"modalImageFrame",name:p,id:p});var m=createElem("div",{className:"modalImageFrameLoading"},r.getLang("advanced.loading"));var k=r.createModalBox(r.getLang(v?"advanced.image_edit":"advanced.image_insert"),createElem("div",{className:"modalBody"},m,n),x,w);function x(){r.selection.setRng(o);var y=window.frames[p];var z=y.getSelectedImage();if(z){var A=y.getSelectedPosition();r.insertOrUpdateImage(v,{src:z.url,width:z.width,height:z.height,"class":"image_"+A})}removeElem(k)}function w(){removeElem(k)}window["frameapi_"+p]={saveChanges:x,cancel:w,iframe:n,loading:m};document.body.appendChild(k);setTimeout(function(){n.focus()},1)},_mceLink:function(t,j){var p=this.editor;var s=p.selection.getContent({format:"text"});var q=p.selection.getNode();var r=p.dom.getParent(q,"A");var l=q&&q.nodeName=="IMG";var n=p.selection.getRng();var k=createElem("input",{type:"text",className:"input-text",value:(r?(r.innerText||r.textContent||""):s)});var m=l?createElem("div"):createElem("div",{className:"linkText"},createElem("h3",p.getLang("advanced.link_text")),k);var o=createElem("input",{type:"text",className:"input-text",value:(r?r.href:"")});var v=p.createModalBox(p.getLang(r?"advanced.link_edit":"advanced.link_insert"),createElem("div",{className:"modalBody"},createElem("div",{className:"linkUrl"},createElem("h3",p.getLang("advanced.link_url")),o,createElem("div",{className:"help"},p.getLang("advanced.link_url_help")),createElem("div",createElem("a",{href:"javascript:void(0)",click:function(){var x=o.value;if(x){window.open(o.value)}else{alert(p.getLang("advanced.link_url_empty"))}}},p.getLang("advanced.link_url_test")))),m),w,u);function w(){p.selection.setRng(n);var y=o.value;if(y){if(!r){if(p.selection.isCollapsed()){var x="mce_temp_wtf"+Math.ceil(Math.random()*10000);p.selection.setContent("<span id='"+x+"'>TEMP</span>");var z=p.getDoc().getElementById(x);p.selection.select(z)}p.getDoc().execCommand("CreateLink",false,"#mce_temp_url#");h.each(p.dom.select("a"),function(A){if(p.dom.getAttrib(A,"href")=="#mce_temp_url#"){r=A}})}if(r){r.href=y;r.setAttribute("_mce_href",y);if(!l){removeChildren(r);r.appendChild(p.getDoc().createTextNode(k.value||y))}}}else{if(r){p.selection.select(r);p.getDoc().execCommand("unlink",false,null)}}removeElem(v)}function u(){removeElem(v)}document.body.appendChild(v);setTimeout(function(){o.focus()},1)},_mceNewDocument:function(){var j=this.editor;j.windowManager.confirm("advanced.newdocument",function(k){if(k){j.execCommand("mceSetContent",false,"")}})},_mceForeColor:function(){var j=this;this._mceColorPicker(0,{color:j.fgColor,func:function(k){j.fgColor=k;j.editor.execCommand("ForeColor",false,k)}})},_mceBackColor:function(){var j=this;this._mceColorPicker(0,{color:j.bgColor,func:function(k){j.bgColor=k;j.editor.execCommand("HiliteColor",false,k)}})},_ufirst:function(j){return j.substring(0,1).toUpperCase()+j.substring(1)}});h.ThemeManager.add("advanced",h.themes.AdvancedTheme)}(tinymce));